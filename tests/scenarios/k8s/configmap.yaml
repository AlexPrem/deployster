default_resource:
  module: k8s
  class: K8sResource
  name: cfg
  config: {}
mock:
  k8s_objects:
    v1-ConfigMap-ns-cfg:
      apiVersion: v1
      kind: ConfigMap
      metadata:
        name: cfg
        namespace: ns
      data:
        k1: v1
        k2: v2
scenarios:
  - description: create_configmap
    resource:
      config:
        manifest:
          apiVersion: v1
          kind: ConfigMap
          metadata:
            name: cfg-new
            namespace: ns
          data:
            k1: v1
            k2: v2
    expected:
      status: STALE
      actions:
        - {name: create, description: 'Create configmap ''cfg-new''', args: [create]}
  - description: update_configmap
    resource:
      config:
        manifest:
          apiVersion: v1
          kind: ConfigMap
          metadata:
            name: cfg
            namespace: ns
          data:
            k1: v1
            k2: v2
    expected:
      status: VALID
      state:
        apiVersion: v1
        kind: ConfigMap
        metadata:
          name: cfg
          namespace: ns
        data:
          k1: v1
          k2: v2
